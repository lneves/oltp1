[mysqld]
# Basic Settings
user = mysql
datadir = /var/lib/mysql
socket = /var/run/mysqld/mysqld.sock
pid-file = /var/run/mysqld/mysqld.pid

# put "non-data" stuff in another location
innodb_log_group_home_dir = /aux_data/innodb_data/logs   # SSD REQUIRED (redo logs)
innodb_undo_directory = /aux_data/innodb_logs/undo   # SSD REQUIRED (undo logs)
log_bin = /aux_data/binlogs/mysql-bin                # SSD preferred
tmpdir = /aux_data/tmp_mysql                          # SSD for temp tables


# Memory Settings
innodb_buffer_pool_size        = 21045339750
innodb_buffer_pool_instances   = 16
key_buffer_size                = 3006477107
tmp_table_size                 = 1503238553
max_heap_table_size            = 1503238553
sort_buffer_size               = 300647710
read_buffer_size               = 4194304
read_rnd_buffer_size           = 8388608
join_buffer_size               = 4194304
table_definition_cache         = 4096
table_open_cache               = 16800

# Connection Settings
max_connections                = 4200
max_allowed_packet             = 16M
thread_cache_size              = 128
open_files_limit               = 42000

# InnoDB Settings
innodb_log_file_size           = 5261334937
innodb_log_buffer_size         = 16777216
innodb_flush_log_at_trx_commit = 1
innodb_flush_method            = O_DIRECT
innodb_file_per_table          = 1
innodb_io_capacity             = 4200
innodb_io_capacity_max         = 8400
innodb_read_io_threads         = 8
innodb_write_io_threads        = 8
innodb_thread_concurrency      = 0
innodb_page_cleaners           = 16
innodb_purge_threads           = 4
innodb_strict_mode             = 1
innodb_stats_on_metadata       = 0
innodb_adaptive_flushing       = 1
innodb_flush_neighbors         = 0

# Performance Schema (monitoring)
performance_schema             = ON

# Logging
log_error                      = /var/log/mysql/error.log
slow_query_log                 = 1
slow_query_log_file            = /var/log/mysql/mysql-slow.log
long_query_time                = 2
log_slow_admin_statements      = ON
log_slow_slave_statements      = ON

# Replication
server-id                      = 1
expire_logs_days               = 10
max_binlog_size                = 100M
binlog_format                  = ROW

# Security
symbolic-links                 = 0

[client]
socket                         = /var/run/mysqld/mysqld.sock

[mysqldump]
quick
quote-names
max_allowed_packet             = 16M
